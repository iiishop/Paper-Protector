<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Protector - Main Interface</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/paper_interface.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-brand">
            <h1>Paper Protector</h1>
        </div>
        <div class="navbar-links">
            <a href="debug.html" class="nav-link">Debug Dashboard</a>
        </div>
        <div class="navbar-status">
            <span class="status-label">Status:</span>
            <span id="connection-status" class="status-indicator disconnected">Disconnected</span>
        </div>
    </nav>

    <main class="paper-interface-container">
        <!-- Center: Paper Visualization -->
        <div class="paper-visualization-area">
            <div class="paper-container">
                <div id="paper-strip" class="paper-strip">
                    <!-- Visualization elements will be injected here -->
                    <div id="scan-cursor" class="scan-cursor"></div>
                    <div id="wet-spots-layer" class="wet-spots-layer"></div>
                </div>
                <div class="ruler-marks">
                    <!-- Marks will be generated by JS -->
                </div>
            </div>
        </div>

        <!-- Right: Controls & Info -->
        <div class="controls-sidebar">
            <!-- System Status -->
            <div class="control-section">
                <h3>System Status</h3>
                <div class="system-status-grid">
                    <!-- Fan Status -->
                    <div class="status-indicator-row">
                        <div class="status-light" id="fan-status-light"></div>
                        <span class="status-label">Fan</span>
                        <span class="status-value" id="fan-power-value">0</span>
                    </div>
                    <!-- Heater Status -->
                    <div class="status-indicator-row">
                        <div class="status-light" id="heater-status-light"></div>
                        <span class="status-label">Heater</span>
                        <span class="status-value" id="heater-power-value">0</span>
                    </div>
                </div>
            </div>

            <!-- Environment Status -->
            <div class="control-section">
                <h3>Environment</h3>
                <div class="env-display">
                    <div class="env-item">
                        <span class="env-label">Temp</span>
                        <span class="env-value" id="current-temp">--</span>
                        <span class="env-unit">Â°C</span>
                    </div>
                    <div class="env-item">
                        <span class="env-label">Humidity</span>
                        <span class="env-value" id="current-humidity">--</span>
                        <span class="env-unit">%</span>
                    </div>
                </div>
                <div class="calibration-controls">
                    <button id="btn-calibrate-zero" class="btn btn-secondary btn-sm">Set Zero (Calibrate)</button>
                    <button id="btn-reset-calibration" class="btn btn-outline btn-sm">Reset</button>
                </div>
                <div id="calibration-status" class="status-text small">Not Calibrated</div>
            </div>

            <!-- Scan Control -->
            <div class="control-section">
                <h3>Operation</h3>
                <div class="operation-status">
                    State: <span id="system-state">IDLE</span>
                </div>
                <button id="btn-start-scan" class="btn btn-primary btn-lg btn-block" disabled>Start Scan</button>
                <button id="btn-stop-all" class="btn btn-danger btn-block">STOP ALL</button>
            </div>

            <!-- Settings -->
            <div class="control-section">
                <h3>Settings</h3>
                <div class="form-group">
                    <label>Paper Length (cm)</label>
                    <div class="input-group">
                        <input type="number" id="paper-length-input" value="21" min="5" max="30">
                        <button id="btn-set-length" class="btn btn-secondary">Set</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom: Progress -->
    <div class="bottom-panel">
        <div class="progress-container">
            <div class="progress-label">Position: <span id="current-position">0.0</span> mm</div>
            <div class="progress-track">
                <div id="progress-bar" class="progress-bar" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="core/pubsub_client.js"></script>
    <script src="js/paper_interface.js"></script>
</body>

</html>